/* !
 * Tiny Accessibility Checker Plugin
 *
 * Copyright (c) 2023 Ephox Corporation DBA Tiny Technologies, Inc.
 * Licensed under the Tiny commercial license. See https://www.tiny.cloud/legal/
 *
 * Version: 7.8.0-392
 */

!function(){"use strict";const e=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(r=a=e,(o=String).prototype.isPrototypeOf(r)||(null===(n=a.constructor)||void 0===n?void 0:n.name)===o.name)?"string":t;var r,a,o,n})(t)===e,t=e=>t=>typeof t===e,r=e("string"),a=e("object"),o=e("array"),n=t("boolean"),i=e=>undefined===e;const s=e=>!(e=>null==e)(e),l=t("function"),c=t("number"),u=()=>{},d=e=>()=>e,p=e=>e,h=(e,t)=>e===t;function m(e,...t){return(...r)=>{const a=t.concat(r);return e.apply(null,a)}}const y=e=>e(),g=d(!1),v=d(!0);class b{constructor(e,t){this.tag=e,this.value=t}static some(e){return new b(!0,e)}static none(){return b.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?b.some(e(this.value)):b.none()}bind(e){return this.tag?e(this.value):b.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:b.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return s(e)?b.some(e):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const w=Array.prototype.slice,f=Array.prototype.indexOf,k=Array.prototype.push,x=(e,t)=>((e,t)=>f.call(e,t))(e,t)>-1,A=(e,t)=>{for(let r=0,a=e.length;r<a;r++)if(t(e[r],r))return!0;return!1},T=(e,t)=>{const r=e.length,a=new Array(r);for(let o=0;o<r;o++){const r=e[o];a[o]=t(r,o)}return a},_=(e,t)=>{for(let r=0,a=e.length;r<a;r++)t(e[r],r)},I=(e,t)=>{const r=[];for(let a=0,o=e.length;a<o;a++){const o=e[a];t(o,a)&&r.push(o)}return r},C=(e,t,r)=>(_(e,((e,a)=>{r=t(r,e,a)})),r),D=(e,t,r)=>{for(let a=0,o=e.length;a<o;a++){const o=e[a];if(t(o,a))return b.some(o);if(r(o,a))break}return b.none()},S=(e,t)=>D(e,t,g),N=(e,t)=>(e=>{const t=[];for(let r=0,a=e.length;r<a;++r){if(!o(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);k.apply(t,e[r])}return t})(T(e,t)),O=e=>{const t=w.call(e,0);return t.reverse(),t},E=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},$=()=>{const e=(e=>{const t=E(b.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(b.some(e))}}})(u);return{...e,on:t=>e.get().each(t)}},R=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},M=(e,t)=>{const r=(t||document).createElement(e);return R(r)},W=R,H=(e,t)=>{const r=e.dom;if(1!==r.nodeType)return!1;{const e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},q=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,L=(e,t)=>e.dom===t.dom,P="undefined"!=typeof window?window:Function("return this;")(),G=(e,t)=>((e,t)=>{let r=null!=t?t:P;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r})(e.split("."),t),j=Object.getPrototypeOf,B=e=>{const t=G("ownerDocument.defaultView",e);return a(e)&&((e=>((e,t)=>{const r=((e,t)=>G(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(j(e).constructor.name))},V=e=>t=>(e=>e.dom.nodeType)(t)===e,F=e=>U(e)&&B(e.dom),U=V(1),z=V(3),K=V(11),X=e=>t=>U(t)&&t.dom.nodeName.toLowerCase()===e,Y=e=>W(e.dom.ownerDocument),J=e=>b.from(e.dom.parentNode).map(W),Q=e=>b.from(e.dom.previousSibling).map(W),Z=e=>O(((e,t)=>{const r=[],a=e=>(r.push(e),t(e));let o=t(e);do{o=o.bind(a)}while(o.isSome());return r})(e,Q)),ee=e=>T(e.dom.childNodes,W),te=e=>(e=>{const t=e.dom.childNodes;return b.from(t[0]).map(W)})(e),re=e=>W(e.dom.host),ae=e=>{const t=W((e=>{if(s(e.target)){const t=W(e.target);if(U(t)&&s(t.dom.shadowRoot)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return(e=>0<e.length?b.some(e[0]):b.none())(t)}}return b.from(e.target)})(e).getOr(e.target)),r=()=>e.stopPropagation(),a=()=>e.preventDefault(),o=(n=a,i=r,(...e)=>n(i.apply(null,e)));var n,i;return((e,t,r,a,o,n,i)=>({target:e,x:t,y:r,stop:a,prevent:o,kill:n,raw:i}))(t,e.clientX,e.clientY,r,a,o,e)},oe=(e,t,r,a)=>{e.dom.removeEventListener(t,r,a)},ne=v,ie=(e,t,r)=>((e,t,r,a)=>((e,t,r,a,o)=>{const n=((e,t)=>r=>{e(r)&&t(ae(r))})(r,a);return e.dom.addEventListener(t,n,o),{unbind:m(oe,e,t,n,o)}})(e,t,r,a,!1))(e,t,ne,r),se=e=>{const t=z(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const r=t.ownerDocument;return(e=>{const t=(e=>W(e.dom.getRootNode()))(e);return K(r=t)&&s(r.dom.host)?b.some(t):b.none();var r})(W(t)).fold((()=>r.body.contains(t)),(a=se,o=re,e=>a(o(e))));var a,o},le=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return W(t)},ce=(e,t)=>(e=>I(ee(e),(e=>H(e,t))))(e),ue=(e,t)=>((e,t)=>{const r=void 0===t?document:t.dom;return q(r)?[]:T(r.querySelectorAll(e),W)})(t,e),de=(e,t,r)=>{let a=e.dom;const o=l(r)?r:g;for(;a.parentNode;){a=a.parentNode;const e=W(a);if(t(e))return b.some(e);if(o(e))break}return b.none()},pe=(e,t)=>S(e.dom.childNodes,(e=>t(W(e)))).map(W),he=(e,t,r)=>de(e,(e=>H(e,t)),r),me=(e,t)=>pe(e,(e=>H(e,t))),ye=(e,t)=>((e,t)=>{const r=void 0===t?document:t.dom;return q(r)?b.none():b.from(r.querySelector(e)).map(W)})(t,e),ge=(e,t,r)=>((e,t,r,a,o)=>((e,t)=>H(e,t))(r,a)?b.some(r):l(o)&&o(r)?b.none():t(r,a,o))(0,he,e,t,r),ve=e=>parseInt(e,10),be=(e,t)=>{const r=e-t;return 0===r?0:r>0?1:-1},we=(e,t,r)=>({major:e,minor:t,patch:r}),fe=e=>{const t=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(e);return t?we(ve(t[1]),ve(t[2]),ve(t[3])):we(0,0,0)},ke=d("html4"),xe=d("html5"),Ae=d("a"),Te=d("aa"),_e=d("aaa"),Ie=e=>t=>t.options.get(e),Ce=Ie("a11ychecker_css_url"),De=Ie("a11ychecker_level"),Se=Ie("a11ychecker_html_version"),Ne=Ie("a11ychecker_issue_url_callback"),Oe=Ie("a11ychecker_filter_issue"),Ee=e=>{var t;return null!==(t=e.options.get("a11ychecker_allow_decorative_images"))&&void 0!==t?t:e.options.get("a11y_advanced_options")},$e={"a11y.d1.description":"This paragraph looks like a heading. If it is a heading, please select a heading level.","a11y.d1.repair.block.h1":"Heading 1","a11y.d1.repair.block.h2":"Heading 2","a11y.d1.repair.block.h3":"Heading 3","a11y.d1.repair.block.h4":"Heading 4","a11y.d1.repair.block.h5":"Heading 5","a11y.d1.repair.block.h6":"Heading 6","a11y.d1.repair.info":"Select a heading level","a11y.d2.description":"Headings must be applied in sequential order. For example: Heading 1 should be followed by Heading 2, not Heading 3.","a11y.d3.description":"Adjacent links with the same URL should be merged into one link","a11y.d4.description":"The selected text appears to be a list. Lists should be formatted using a list tag.","a11y.d5a.description":"Large text must have a contrast ratio of at least 3:1","a11y.d5b.description":"Text must have a contrast ratio of at least 4.5:1","a11y.d5c.description":"Text must have a contrast ratio of at least 7:1","a11y.h93.description":"ID attribute must be unique","a11y.h93.repair.info":"Make ID unique","a11y.h93.repair.deduplicate.others":"Keep this ID and remove all others","a11y.h93.repair.deduplicate.this":"Remove this ID","a11y.h93.repair.deduplicate.all":"Remove all IDs","a11y.i1.description.decorativeAllowed":"Images must be marked as decorative or have an alternative text description","a11y.i1.description.decorativeNotAllowed":"Images must have an alternative text description. Decorative images are not allowed.","a11y.i1.repair.errors.duplicate":"Alternative text cannot be the same as the filename","a11y.i1.repair.errors.empty":"Alternative text cannot be empty","a11y.i1.repair.info.decorativeAllowed":"Or provide alternative text","a11y.i1.repair.info.decorativeNotAllowed":"Provide alternative text","a11y.i1.repair.checkboxlabel":"Make image decorative","a11y.i1.repair.checkboxtext":"Image is decorative","a11y.i2.description":"Alternative text must not be the same as the image filename","a11y.i2.repair.info":"Provide alternative text","a11y.i3.description":"Image alternative text should be less than 100 characters","a11y.i3.repair.error":"Alternative text is {0} characters","a11y.t1.description":"Tables must have captions","a11y.t1.repair.errors.duplicate":"Table caption cannot be the same as the table summary","a11y.t1.repair.errors.empty":"Caption cannot be empty","a11y.t1.repair.info":"Provide caption","a11y.t2.description":"Complex tables should have summaries","a11y.t2.repair.errors.duplicate":"Table summary cannot be the same as the table caption","a11y.t2.repair.errors.empty":"Summary cannot be empty","a11y.t2.repair.info":"Provide table summary","a11y.t3.description":"Table caption and summary cannot have the same value","a11y.t4a.description":"Table elements must contain TR and TD tags","a11y.t4b.description":"Tables must have at least one header cell","a11y.t4b.repair.info":"Choose table header","a11y.t4c.description":"Table headers must be applied to a row or a column","a11y.t4c.repair.header.col":"Header column","a11y.t4c.repair.header.row":"Header row","a11y.t4c.repair.info":"Select header scope","a11y.t4c.repair.scope.col":"Column","a11y.t4c.repair.scope.colgroup":"Column group","a11y.t4c.repair.scope.row":"Row","a11y.t4c.repair.scope.rowgroup":"Row group","a11y.widget.counter":"Issue {0} of {1}","a11y.widget.ignore":"Ignore","a11y.widget.issue.none":"No accessibility issues detected","a11y.widget.next":"Next issue","a11y.widget.previous":"Previous issue","a11y.widget.legacyrepair":"Repair issue","a11y.widget.repair":"Repair","a11y.widget.title":"Accessibility Checker","a11y.widget.help.title":"Click for more info","a11y.control.tooltip":"Accessibility checker","a11y.control.menutext":"Accessibility checker...","a11y.issue.dialog.tagname.Text":"Text","a11y.issue.dialog.tagname.Image":"Image","a11y.issue.dialog.tagname.Table":"Table","a11y.issue.dialog.tagname.Link":"Link",error:"Error",warning:"Warning",info:"Info",success:"Success",solution:"Solution",moreInfo:"More info",quotation:'"{0}"'},Re=e=>$e[e],Me=e=>{const t=tinymce.util.I18n;return Array.isArray(e)?t.translate([Re(e[0]),...e.slice(1)]):t.translate(Re(e))},We=Object.keys,He=Object.hasOwnProperty,qe=(e,t)=>{const r=We(e);for(let a=0,o=r.length;a<o;a++){const o=r[a];t(e[o],o)}},Le=e=>(t,r)=>{e[r]=t},Pe=(e,t)=>He.call(e,t),Ge=(e,t,a)=>{((e,t,a)=>{if(!(r(a)||n(a)||c(a)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",a,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,a+"")})(e.dom,t,a)},je=(e,t)=>{const r=e.dom.getAttribute(t);return null===r?void 0:r},Be=(e,t)=>b.from(je(e,t)),Ve=(e,t)=>{e.dom.removeAttribute(t)},Fe=(()=>{const e="ephox-foam".replace(/\./g,"-");return{resolve:t=>e+"-"+t}})().resolve,Ue=(e,t,r)=>{Ge(e,t,r)},ze=(e,t,r)=>{Ve(e,t),Ve(e,r)},Ke=e=>{const t=e.editor;return{start:t=>{((e,t,r,a,o,n)=>{_(e,(e=>{const r=((e,t,r,a)=>{switch(e){case"info":return b.some(t);case"warning":return b.some(r);case"error":return b.some(a);default:return b.none()}})(e.severity,a,o,n).toArray().concat([t]);_(r,(t=>{Ge(e.element,t,1)}))})),b.from(e[0]).each((e=>{Ue(e.element,r,e.severity)}))})(t,e.violation,e.current,e.info,e.warn,e.error)},moveTo:(r,a)=>{((e,t,r,a)=>{const o=ue(e,"["+t+"]");_(o,(e=>{Ve(e,t)})),Ue(r,t,a)})(W(t.getBody()),e.current,r,a)},stop:()=>{((e,t,r,a,o,n)=>{const i=ue(e,"["+t+"]");_(i,(e=>{_([t,r,a,o,n],(t=>{Ve(e,t)})),ze(e,t,r)}))})(W(t.getBody()),e.violation,e.current,e.info,e.warn,e.error)},exclude:t=>{ze(t,e.violation,e.current)}}},Xe="data-"+Fe("a11y-current-violation"),Ye="data-"+Fe("a11y-violation"),Je="data-"+Fe("a11y-severity-info"),Qe="data-"+Fe("a11y-severity-warn"),Ze="data-"+Fe("a11y-severity-error"),et="data-"+Fe("accessibility-ignore"),tt=d(et),rt=(e,t=!1)=>{return se(e)?e.dom.isContentEditable:(r=e,ge(r,"[contenteditable]")).fold(d(t),(e=>"true"===at(e)));var r},at=e=>e.dom.contentEditable,ot=e=>{const t=(e=>de(e,F).exists(rt))(e);return t&&F(e)&&rt(e)},nt=(e,t)=>I(e.querySelectorAll(t),(e=>ot(W(e)))),it=(e,t,r,a)=>N(t,(t=>"I1"===t.id?t.check(e,a,r)?[{rule:t,element:e}]:[]:t.check(e,a)?[{rule:t,element:e}]:[])),st=(e,t)=>{var r,a;let o=[];const n=(e=>{const t=[],r=[];for(let o=0,n=e.length;o<n;o++){const n=e[o];(a=n,a.walkable?t:r).push(n)}var a;return{pass:t,fail:r}})(e.rules),s=i(e.ignoreSelectors)?[]:e.ignoreSelectors,l=n.pass,c=n.fail,u=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null);for(;u.nextNode();){const t=W(u.currentNode);if(!A(s,(e=>H(t,e)))&&F(t)&&ot(t)){const a=it(t.dom,l,e.allowDecorativeImages,null!==(r=e.ignoreSelectors)&&void 0!==r?r:[]);o=o.concat(a)}}const d=((e,t,r)=>N(t,(t=>T(t.check(e,r),(e=>({rule:t,element:e}))))))(t,c,null!==(a=e.ignoreSelectors)&&void 0!==a?a:[]);return o=o.concat(d),o.sort(((e,t)=>((e,t)=>e===t?0:((e,t)=>((e,t,r)=>!!(e.compareDocumentPosition(t)&r))(e,t,Node.DOCUMENT_POSITION_PRECEDING))(e,t)?1:-1)(e.element,t.element))),o},lt=(e,t)=>ye(e,t).isSome(),ct=d("error"),ut=d("warning"),dt=(e,t)=>{const r=e;return r.matches?r.matches(t):r.webkitMatchesSelector?r.webkitMatchesSelector(t):r.mozMatchesSelector?r.mozMatchesSelector(t):!!r.msMatchesSelector&&r.msMatchesSelector(t)},pt=e=>e.length>0,ht=(e=>{const t=t=>e(t)?b.from(t.dom.nodeValue):b.none();return{get:r=>{if(!e(r))throw new Error("Can only get text value of a text node");return t(r).getOr("")},getOption:t,set:(t,r)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=r}}})(z),mt=(e,t)=>vt(e,t).isSome(),yt=(e,t)=>((e,t)=>A(t,(t=>H(e,t))))(e,t)?te(e).bind((e=>yt(e,t))):b.some(e),gt=e=>{return(t=e,ht.getOption(t)).filter((e=>pt(e.trim())));var t},vt=(e,t)=>pe(e,(e=>gt(e).orThunk((()=>{const r=yt(e,t).getOr(e);return gt(r)})).isSome())),bt="strong,b",wt=(e,t,r)=>vt(e,r).fold((()=>((e,t)=>{for(let r=0,a=e.length;r<a;++r)if(!0!==t(e[r]))return!1;return!0})(ee(e),(e=>wt(e,t,r)))),(e=>((e,t)=>he(e,bt,(e=>L(e,t))).isSome())(e,t))),ft={id:"D1",wcag:"1.3.1",severity:ut(),desckey:"a11y.d1.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H42.html",walkable:!0,check:(e,t)=>{const r=W(e);return!(!dt(e,"p")||!lt(r,bt))&&wt(r,r,t)},levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},kt={id:"D2",wcag:"1.3.1",severity:ct(),desckey:"a11y.d2.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G141.html",walkable:!1,check:e=>{const t=nt(e,"h1,h2,h3,h4,h5,h6");let r;const a=[];return _(t,(e=>{const t=parseInt(e.tagName.slice(1),10);r&&t-r>1&&a.push(e),r=t})),a},levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},xt={id:"D3",wcag:"2.4.4",severity:ct(),desckey:"a11y.d3.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H2.html",walkable:!1,check:e=>{const t=W(e),r=ue(t,"a + a"),a=I(r,(e=>{const t=O(Z(e));return D(t,X("a"),(e=>{return!(z(t=e)&&(r=(e=>ht.get(e))(t).replace(/[\u200B-\u200D\uFEFF]/g,""),!pt(r)));var t,r})).exists((t=>t.dom.href===e.dom.href))&&ot(e)}));return T(a,(e=>e.dom))},levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},At=(e,t)=>{const r=e.nodeName,a=((e,t)=>{let r=e.nextSibling;for(;null!==r&&(t&&"#text"===r.nodeName||"BR"===r.nodeName);)r=r.nextSibling;return r})(e,t);return null!==a&&a.nodeName===r&&a},Tt=(e,t,r)=>{const a=[];if(t(e)){a.push(e);let o=At(e,r);for(;!1!==o&&t(o);)a.push(o),o=At(o,r)}return a},_t=(e,t)=>{let r=-1;for(let a=0;a<e.length;a++)if(e[a]===t){r=a;break}return r},It=(e,t)=>{const r=nt(e,"p,h1,h2,h3,h4,h5,h6"),a=[];let o=0;for(;o<r.length;){const e=r[o],n=Tt(e,t,!0);if(n.length>1){a.push(e);const t=n[n.length-1],i=_t(r,t);o=-1===i?o+1:i}else s(e.firstChild)?(Tt(e.firstChild,t,!1).length>1&&a.push(e),o++):o++}return a},Ct=e=>{var t;return s(null===(t=e.textContent)||void 0===t?void 0:t.match(/^\s{0,}([a-z1-9]|i+)\s{0,}[.)-]/gim))},Dt={id:"D4o",wcag:"1.3.1",severity:ct(),desckey:"a11y.d4.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H48.html",walkable:!1,check:e=>It(e,Ct),levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},St=e=>{var t;return s(null===(t=e.textContent)||void 0===t?void 0:t.match(/^\s{0,}(\*|-)\s{0,}/gim))},Nt={id:"D4u",wcag:"1.3.1",severity:ct(),desckey:"a11y.d4.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H48.html",walkable:!1,check:e=>It(e,St),levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},Ot=(e,t)=>{const r=e.dom,a=window.getComputedStyle(r).getPropertyValue(t);return""!==a||se(e)?a:Et(r,t)},Et=(e,t)=>(e=>void 0!==e.style&&l(e.style.getPropertyValue))(e)?e.style.getPropertyValue(t):"",$t=(e,t,r,a)=>({red:e,green:t,blue:r,alpha:a}),Rt=e=>{const t=e=>e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),r=e.red/255,a=e.green/255,o=e.blue/255;return.2126*t(r)+.7152*t(a)+.0722*t(o)},Mt=(e,t)=>{const r=e.alpha+t.alpha*(1-e.alpha),a=(e.red*e.alpha+t.red*t.alpha*(1-e.alpha))/r,o=(e.green*e.alpha+t.green*t.alpha*(1-e.alpha))/r,n=(e.blue*e.alpha+t.blue*t.alpha*(1-e.alpha))/r;return $t(Math.ceil(a),Math.ceil(o),Math.ceil(n),r)},Wt=e=>{const t=(e,t,r,a)=>{const o=parseInt(e,10),n=parseInt(t,10),i=parseInt(r,10),s=parseFloat(a);return b.some($t(o,n,i,s))};if("transparent"===e)return t("0","0","0","0");const r=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/.exec(e);if(null!==r)return t(r[1],r[2],r[3],"1");const a=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/.exec(e);return null!==a?t(a[1],a[2],a[3],a[4]):b.none()},Ht=(e,t)=>{const r=parseFloat(Ot(e,"opacity"));return r<1?$t(t.red,t.green,t.blue,t.alpha*r):t},qt=(e,t)=>Lt(e).filter((e=>e<t)).isSome(),Lt=e=>{const t=(e=>{const t=Y(e),r=le(t),a=[e].concat(((e,t)=>{const r=l(t)?t:g;let a=e.dom;const o=[];for(;null!==a.parentNode&&void 0!==a.parentNode;){const e=a.parentNode,t=W(e);if(o.push(t),!0===r(t))break;a=e}return o})(e,(e=>L(e,r)))),o=C(a,((e,t)=>{if(1===e.alpha)return e;const r=Ot(t,"background-color");return Wt(r).bind((r=>{const a=Ht(t,r);return a.alpha>0?b.some(Mt(e,a)):b.none()})).getOr(e)}),$t(0,0,0,0));return o.alpha<1?Mt(o,$t(255,255,255,1)):o})(e);return((e,t)=>{const r=Ot(e,"color");return Wt(r).bind((r=>{const a=Ht(e,r),o=a.alpha<1?Mt(a,t):a;return b.some(o)}))})(e,t).map((e=>{const r=Rt(t);return((e,t)=>(Math.max(e,t)+.05)/(Math.min(e,t)+.05))(Rt(e),r)}))},Pt={id:"D5c",wcag:"1.4.3",severity:ct(),desckey:"a11y.d5c.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G17.html",walkable:!0,check:(e,t)=>{const r=W(e);return mt(r,t)&&qt(r,7)},levels:[_e()],htmlversions:[ke(),xe()]},Gt=e=>{const t=Ot(e,"font-size"),r=new RegExp(".*px").test(t),a=/(\d*\.?\d*)(.*)/.exec(t);return r&&null!==a?b.some(Number(a[1])):b.none()},jt=e=>{const t=(e=>{const t=Ot(e,"font-weight");return!("bold"!==t&&"bolder"!==t)||!!/^[0-9]*$/.test(r=t)&&parseInt(r,10)>=700;var r})(e),r=Y(e),a=le(r),o=Gt(a);return Gt(e).fold(g,(e=>o.fold((()=>e>=24||t&&e>=19),(r=>e>=1.5*r||t&&e>=1.2*r))))},Bt={id:"D5a",wcag:"1.4.3",severity:ct(),desckey:"a11y.d5a.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G145.html",walkable:!0,check:(e,t)=>{const r=W(e);return mt(r,t)&&jt(r)&&qt(r,3)},levels:[Te()],htmlversions:[ke(),xe()]},Vt={id:"D5b",wcag:"1.4.3",severity:ct(),desckey:"a11y.d5b.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G18.html",walkable:!0,check:(e,t)=>{const r=W(e);return mt(r,t)&&!jt(r)&&qt(r,4.5)},levels:[Te()],htmlversions:[ke(),xe()]},Ft={id:"H93",wcag:"4.1.1",severity:ct(),desckey:"a11y.h93.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H93.html",walkable:!1,check:e=>{const t=W(e),r=ue(t,"*[id]"),a=C(r,((e,t)=>{const r=je(t,"id");if(void 0!==r&&ot(t)){if(Pe(e.problems,r))return e;if(Pe(e.ids,r)){const t=e.ids[r];return{...e,problems:{...e.problems,[r]:t}}}return{...e,ids:{...e.ids,[r]:t.dom}}}return e}),{ids:{},problems:{}});return((e,t)=>{const r=[];return qe(e,((e,a)=>{r.push(t(e,a))})),r})(a.problems,p)},levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},Ut=X("img"),zt={id:"I1",wcag:"1.1.1",severity:ct(),desckey:"a11y.i1.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G95.html",walkable:!0,check:(e,t,r)=>{const a=W(e);if(!Ut(a))return!1;const o=Be(a,"alt"),n=o.isSome(),i=o.exists((e=>""===e.trim())),s=((e,t,r=h)=>e.exists((e=>r(e,t))))(Be(a,"role"),"presentation");return!n||(r?n&&i&&!s||n&&!i&&s:i||s)},levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},Kt={id:"I2",wcag:"1.1.1",severity:ct(),desckey:"a11y.i2.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G95.html",walkable:!0,check:e=>(e=>dt(e,"img[alt][src]"))(e)&&e.src.split("/").pop()===e.alt.split("/").pop(),levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},Xt={id:"I3",wcag:"N/A",severity:ut(),desckey:"a11y.i3.description",url:"",walkable:!0,check:e=>{const t=W(e);return!!Ut(t)&&Be(t,"alt").exists((e=>e.length>100))},levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},Yt={id:"T1",wcag:"1.3.1",severity:ct(),desckey:"a11y.t1.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H39.html",walkable:!0,check:e=>{if(dt(e,"table")){const t=e.querySelector("caption");return!t||dt(t,":empty")}return!1},levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},Jt={id:"T2",wcag:"1.3.1",severity:ut(),desckey:"a11y.t2.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H73.html",walkable:!0,check:e=>dt(e,"table")&&s(e.querySelector("[rowspan]")||e.querySelector("[colspan]"))&&!e.hasAttribute("summary"),levels:[Ae(),Te(),_e()],htmlversions:[ke()]},Qt={id:"T3",wcag:"1.3.1",severity:ct(),desckey:"a11y.t3.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H73.html",walkable:!0,check:e=>{if(dt(e,"table")&&e.hasAttribute("summary")){const t=e.querySelectorAll("caption");return t.length>0&&e.getAttribute("summary")===t[0].innerHTML}return!1},levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},Zt={id:"T4b",wcag:"1.3.1",severity:ct(),desckey:"a11y.t4b.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H51.html",walkable:!0,check:e=>"table"===e.nodeName.toLowerCase()&&0===e.querySelectorAll("th").length,levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},er={id:"T4c",wcag:"1.3.1",severity:ct(),desckey:"a11y.t4c.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H63.html",walkable:!0,check:e=>{return!("th"!==e.nodeName.toLowerCase()||(t=e).hasAttribute("scope")&&/row|col|rowgroup|colgroup/i.test(t.getAttribute("scope")));var t},levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},tr=(e,t)=>0===e.querySelectorAll(t).length,rr={id:"T4a",wcag:"1.3.1",severity:ct(),desckey:"a11y.t4a.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H51.html",walkable:!0,check:e=>{return"table"===e.nodeName.toLowerCase()&&(tr(t=e,"tr")||tr(t,"td"));var t},levels:[Ae(),Te(),_e()],htmlversions:[ke(),xe()]},ar=e=>{var t;const r=null===(t=e.caption)||void 0===t?void 0:t.innerHTML,a=r?`${r}`:"",o=e.rows,n=o.length,i=o[0],s=i?i.cells.length:0;return pt(a)?`${a}. ${n}x${s}`:`${n}x${s}`},or=e=>({id:e.id.toUpperCase(),severity:e.severity,url:e.url,description:Me(e.description),element:e.element.dom,contentID:e.contentId}),nr=e=>{const t=(e=>{const t=(e=>{const t=e.options.get("a11ychecker_ignored_rules");return N(tinymce.explode(t),(e=>e.length>0?[e.toUpperCase()]:[]))})(e),r=De(e),a=Se(e);return{rules:I([ft,kt,xt,Dt,Nt,Bt,Vt,Pt,Ft,zt,Kt,Xt,Yt,Jt,Qt,er,rr,Zt],(e=>!x(t,e.id.toUpperCase())&&x(e.levels,r)&&x(e.htmlversions,a))),allowDecorativeImages:Ee(e),ignoreSelectors:["img[data-mce-placeholder]","[data-mce-bogus=all] *","[data-mce-bogus]","[data-mce-mergetag-affix]"]}})(e);(e=>{e.on("init",(()=>{_([et,Ye,Je,Qe,Ze,Xe],(t=>{e.serializer.addTempAttr(t)}))}))})(e);const r=E(!1),a=(e=>Ke({editor:e,violation:Ye,current:Xe,info:Je,warn:Qe,error:Ze}))(e),o=tt();let n=[],i=0;const s=()=>{const r=st(t,e.getBody()),a=((e,t)=>T(t,(t=>{const r=t.rule,a=t.element,o=r.id.toUpperCase(),n="I1"!==r.id?r.desckey:Ee(e)?`${r.desckey}.decorativeAllowed`:`${r.desckey}.decorativeNotAllowed`,i=(e=>{const{tagName:t,value:r}=(t=>{const r=t.localName;if("img"===r){const t=e.getAttribute("src")||"";return{tagName:"a11y.issue.dialog.tagname.Image",value:t.startsWith("data:image")?t:t.split("/").pop()||"unknown_image"}}return"table"===r?{tagName:"a11y.issue.dialog.tagname.Table",value:ar(t)}:"th"===r?{tagName:"a11y.issue.dialog.tagname.Table",value:ar(t.closest("table"))}:"a"===r?{tagName:"a11y.issue.dialog.tagname.Link",value:e.getAttribute("href")||""}:{tagName:"a11y.issue.dialog.tagname.Text",value:e.textContent||""}})(e),a=(e=>{const t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[<>"']/g,(e=>t[e]))})(r.length>30?`${r.substring(0,30)}...`:r);return r?`<div id="accessibility-issue__contentID"><span>${Me(t)}:&nbsp;</span><span>${Me(["quotation",a])}</span></div>`:`<div id="accessibility-issue__contentID">${Me(t)}</div>`})(a);return{id:o,description:n,element:W(a),url:r.url,severity:r.severity,contentId:i}})))(e,r);return I(a,(t=>{const r=(n=t.element,Be(n,o).map((e=>e.split(" "))).getOr([])),a=Oe(e);var n;return!x(r,t.id)&&a(or(t))}))},l=t=>(i+=t,i=i<0?i+n.length:i%n.length,a.moveTo(n[i].element,n[i].severity),e.selection.scrollIntoView(n[i].element.dom),{summaryLabel:Me(["a11y.widget.counter",i+1,n.length]),issue:n[i],index:i+1}),c=()=>n.length>0?b.some(l(0)):b.none(),u=()=>{r.set(!0),n=s(),i=0},d=()=>{a.stop(),r.set(!1),i=0,n=[]};return{scan:()=>((e=>{e.dispatch("A11ycheckStart")})(e),u(),a.start(n),c()),stepIssue:l,getIssues:()=>n.slice(0),getCurrent:c,getReport:()=>{const e=r.get();try{return e||u(),T(n,or)}finally{e||d()}},resolveCurrent:t=>(t&&(((e,t,r)=>{const a=Be(e,t).map((e=>e.concat(" ",r))).getOr(r);Ge(e,t,a)})(n[i].element,o,n[i].id),(e=>{e.dispatch("A11ycheckIgnore")})(e)),n=s(),c()),clear:d,isAuditing:()=>r.get()}};let ir=0;const sr=(e,t)=>{const r=t.ui.registry.getAll().icons;return b.from(r[e]).orThunk((()=>b.from(r["temporary-placeholder"]))).getOr("!not found!")},lr={success:"checkmark",info:"info",warning:"notice",error:"warning"},cr=(e,t,r,a,o,n,i,l)=>{const c=Me(r),u=Me(t),d=lr[r],p=l?`${(e=>{const t=(new Date).getTime(),r=Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295*1e9);return ir++,e+"_"+r+ir+String(t)})("announcement-live-region")}`:"announcement-live-region",h=`<div class="accessibility-issue__description" ><div aria-live="polite" aria-atomic="true" role="alert" class="accessbility-sr-only" id="${p}"></div><div><div><div class="tox-icon accessibility-issue__icon">${sr(d,e)}</div><h2>${c.toUpperCase()}</h2></div>${n||""}<p>${u}</p></div><div id="accessibility-issue__document">`+((e,t,r)=>{const a=Me("a11y.widget.help.title"),o=Me("moreInfo");return"help"===e?`<a href="${r}" data-mce-tooltip="${a}" class="tox-button--more-info-a11ychecker-link" target="_blank" data-alloy-tabstop="true" tabindex="-1">${o}</a>`:`<div class="tox-icon">${sr(e,t)}</div>`})(a,e,i)+"</div></div>";return setTimeout((()=>{const e=document.getElementById(p);if(s(e)){const t=o?`${o}, `:"",r=n?`: ${n}`:"";e.innerHTML=`${t}${c}${r}, ${u}`}}),100),h},ur=(e,t,r,a)=>({type:"listbox",label:t,name:e,items:T(r,(e=>({text:a(e.text),value:e.value})))}),dr=(e,t)=>({type:"input",name:e,label:t}),pr=(e,t,r)=>({type:"label",label:t,items:[{type:"checkbox",name:e,label:r}]}),hr=(e,t)=>({title:Me("a11y.widget.title"),body:{type:"panel",items:[{type:"panel",classes:["tox-accessibility-issue","accessibility-issue--success"],items:[{type:"htmlpanel",html:cr(e,"a11y.widget.issue.none","success","checkmark"),presets:"presentation"}]}]},buttons:[{type:"submit",name:"ok",text:"OK",primary:!0}],onSubmit:e=>e.close(),onClose:t}),mr=(e,t,r)=>{e.redial(t),e.focus(r)};var yr;!function(e){e.Next="next",e.Prev="prev",e.Ignore="ignore",e.Ok="ok",e.Repair="repair"}(yr||(yr={}));const gr=({issue:e,summaryLabel:t},r,a,o,n,i)=>{const s=Ne(n),l=e=>gr(e,r,a,b.none(),n,i),c=o=>(s,{name:c})=>{if(c===yr.Next||c===yr.Prev){const e=r.stepIssue(c===yr.Next?1:-1);mr(s,l(e),c)}else c===yr.Ignore?r.resolveCurrent(!0).fold((()=>mr(s,hr(n,i),yr.Ok)),(e=>mr(s,l(e),yr.Ignore))):c===yr.Repair&&((o,s)=>{const c=s=>{mr(o,gr({issue:e,summaryLabel:t},r,a,b.some(s),n,i),yr.Repair)},u=()=>r.resolveCurrent(!1).fold((()=>r.scan().fold((()=>mr(o,hr(n,i),yr.Ok)),(e=>mr(o,l(e),yr.Ignore)))),(e=>mr(o,l(e),yr.Ignore)));s.each((t=>{t.repair(e.element,e.id,((e,t)=>{const r={},a={};return((e,t,r,a)=>{qe(e,((e,o)=>{(t(e,o)?r:a)(e,o)}))})(e,t,Le(r),Le(a)),{t:r,f:a}})(o.getData(),((t,r)=>{return a=r,""===(o=e.id)||a.length>=o.length&&a.substr(0,0+o.length)===o;var a,o})).t,(e=>e.fold(c,u)))}))})(s,o)},u=t=>r=>t.each((t=>{t.onChange.each((t=>t(r,r.getData(),e))),t.shouldDisableRepair.each((t=>{const a=t(r.getData(),e);r.setEnabled(yr.Repair,!a)}))})),d=(r,a,o)=>{const l="warning"===(d=e.severity)?"warn":d;var d;const p=a.map((()=>({type:"panel",classes:["accessibility-issue__repair"],items:[{type:"panel",classes:["accessibility-issue__header"],items:[{type:"htmlpanel",html:`<h2 id="accessibility-issue__subheader">${Me("solution")}</h1>`,presets:"presentation"}]},...a.map((e=>e.items)).getOr([])]}))).toArray();return{title:Me("a11y.widget.title"),body:{type:"panel",classes:["tox-accessibility-issue",`accessibility-issue--${l}`],items:[{type:"panel",classes:["accessibility-issue__header"],items:[{type:"htmlpanel",html:`<h2 id="accessibility-issue__subheader">${t}</h1>`,presets:"presentation"},{type:"button",name:yr.Prev,text:Me("a11y.widget.previous"),icon:"action-prev",borderless:!0},{type:"button",name:yr.Next,text:Me("a11y.widget.next"),icon:"action-next",borderless:!0}]},{type:"htmlpanel",html:cr(n,e.description,e.severity,"help",t,e.contentId,s(e.id),!0),presets:"presentation"},...p]},buttons:[{type:"custom",name:yr.Ignore,text:Me("a11y.widget.ignore")},{type:"custom",name:yr.Repair,text:Me("a11y.widget.repair"),enabled:!o,primary:!0}],initialData:{...a.map((e=>e.initialData)).getOr({})},onAction:c(r),onChange:u(r),onClose:i}};return a(e.id).fold((()=>d(b.none(),b.none(),!0)),(t=>{const r=((e,t,r)=>{const a=t.element;return r.fold((()=>e.ui.map((e=>e(t.id,a)))),(r=>e.ui.map((e=>{const o=e(t.id,a);return{items:o.items.concat([(n=r.errorMessage,{type:"htmlpanel",html:`<div class="tox-form__group--error">${n}</div>`})]),initialData:{...o.initialData,...r.repairErrorData}};var n}))))})(t,e,o),a=t.shouldDisableRepair.bind((t=>r.map((r=>t(r.initialData,e))))).getOr(!1);return d(b.some(t),r,a)}))},vr=(e,t)=>{J(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},br=(e,t)=>{const r=(e=>b.from(e.dom.nextSibling).map(W))(e);r.fold((()=>{J(e).each((e=>{wr(e,t)}))}),(e=>{vr(e,t)}))},wr=(e,t)=>{e.dom.appendChild(t.dom)},fr=(e,t)=>{_(t,(t=>{wr(e,t)}))},kr=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},xr=e=>{const t=ee(e);var r,a;t.length>0&&(r=e,_(a=t,((e,t)=>{const o=0===t?r:a[t-1];br(o,e)}))),kr(e)},Ar=e=>e.dom.innerHTML,Tr=e=>{const t=t=>t(e),r=d(e),a=()=>o,o={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:v,isError:g,map:t=>Ir.value(t(e)),mapError:a,bind:t,exists:t,forall:t,getOr:r,or:a,getOrThunk:r,orThunk:a,getOrDie:r,each:t=>{t(e)},toOptional:()=>b.some(e)};return o},_r=e=>{const t=()=>r,r={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:g,isError:v,map:t,mapError:t=>Ir.error(t(e)),bind:t,exists:g,forall:v,getOr:p,or:p,getOrThunk:y,orThunk:y,getOrDie:(a=String(e),()=>{throw new Error(a)}),each:u,toOptional:b.none};var a;return r},Ir={value:Tr,error:_r,fromOption:(e,t)=>e.fold((()=>_r(t)),Tr)},Cr=e=>(e=>W(e.dom.cloneNode(!0)))(e),Dr=(e,t,r)=>Ir.error({errorMessage:t(e),repairErrorData:r}),Sr=(e,t,r,a,o,n)=>0===t.length?Dr(a,n,{}):Nr(e,t,r,o,n),Nr=(e,t,r,a,o)=>t===r?Dr(a,o,{}):Ir.value(e),Or=e=>{const t=e.split("/");return b.from(t.pop())},Er=(e,t,r,a,o,n)=>{const i=Be(e,"src").bind(Or).getOr(""),s=r[`${t}_textinput`];return r[`${t}_checkbox`]?(e=>(Ge(e,"alt",""),Ge(e,"role","presentation"),Ir.value(e)))(e):Sr(e,s,i,a,o,n).map((e=>(Ge(e,"alt",s),"presentation"===je(e,"role")&&Ve(e,"role"),e)))},$r=e=>e.dom.textContent,Rr=(e,t,r,a,o,n)=>{const i=je(e,"summary");return Sr(e,r[t],i,a,o,n).map((a=>{const o=me(e,"caption").fold((()=>M("caption")),(e=>{var t;return(t=e).dom.textContent="",_(ee(t),(e=>{kr(e)})),e}));return((e,t)=>{e.dom.textContent=t})(o,r[t]),((e,t)=>{te(e).fold((()=>{wr(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))})(a,o),a}))},Mr=e=>`${e}_checkbox`,Wr=e=>`${e}_textinput`,Hr=(e,t)=>{const r=t.id,a=!0===e[Mr(r)],o=e[Wr(r)].length>0;return!a&&!o},qr=(e,t,r)=>{const a=r.id,o=Mr(a),n=Wr(a);!0===t[o]?(e.setEnabled(n,!1),e.setEnabled(yr.Repair,!0)):(e.setEnabled(n,!0),t[n].length>0?(e.setEnabled(yr.Repair,!0),e.setEnabled(o,!0)):(e.setEnabled(o,!0),e.setEnabled(yr.Repair,!1)))},Lr=(e,t)=>{const r=dr(Wr(t),Me((a="a11y.i1.repair.info",e?`${a}.decorativeAllowed`:`${a}.decorativeNotAllowed`)));var a;return e?[pr(Mr(t),Me("a11y.i1.repair.checkboxlabel"),Me("a11y.i1.repair.checkboxtext")),r]:[r]},Pr=(e,t,r)=>{const a=je(e,"alt"),o=t?{[Mr(r)]:!1}:{};return{[Wr(r)]:a||"",...o}},Gr=e=>{const t=Ee(e),r=(t,r)=>{e.undoManager.transact((()=>{const a=r();a.isValue()&&(e=>{e.dispatch("A11ycheckRepair")})(e),t(a)}))},a={H93:b.some({ui:b.some(((e,t)=>({items:[ur(e,Me("a11y.h93.repair.info"),[{text:"a11y.h93.repair.deduplicate.others",value:"others"},{text:"a11y.h93.repair.deduplicate.this",value:"this"},{text:"a11y.h93.repair.deduplicate.all",value:"all"}],Me)],initialData:{[e]:""}}))),repair:(t,a,o,n)=>{r(n,(()=>((e,t,r,a)=>{const o=r[t],n="all"===o||"this"===o;if("all"===o||"others"===o){const t=je(e,"id"),r=a.getBody(),o=W(r),n=ue(o,`*[id="${t}"]`),i=I(n,(t=>!L(t,e)));_(i,(e=>{Ve(e,"id")}))}return n&&Ve(e,"id"),Ir.value(e)})(t,a,o,e)))},shouldDisableRepair:b.none(),onChange:b.none()}),I1:b.some({ui:b.some(((e,r)=>({items:Lr(t,e),initialData:Pr(r,t,e)}))),repair:(e,t,a,o)=>{r(o,(()=>Er(e,t,a,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",Me)))},shouldDisableRepair:t?b.some(Hr):b.none(),onChange:t?b.some(qr):b.none()}),I2:b.some({ui:b.some(((e,r)=>({items:Lr(t,e),initialData:Pr(r,t,e)}))),repair:(e,t,a,o)=>{r(o,(()=>Er(e,t,a,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",Me)))},shouldDisableRepair:t?b.some(Hr):b.none(),onChange:t?b.some(qr):b.none()}),I3:b.some({ui:b.some(((e,t)=>({items:Lr(!1,e),initialData:Pr(t,!1,e)}))),repair:(e,t,a,o)=>{r(o,(()=>((e,t,r,a,o)=>{const n=r[`${t}_textinput`];return((e,t,r,a,o,n=100)=>{const i=`${t}_textinput`;return r.length>n?Dr([a,r.length],o,{[i]:r}):Ir.value(e)})(e,t,n,a,o,100).map((e=>(Ge(e,"alt",n),e)))})(e,t,a,"a11y.i3.repair.error",Me)))},shouldDisableRepair:b.none(),onChange:b.none()}),T1:b.some({ui:b.some(((e,t)=>({items:[dr(e,Me("a11y.t1.repair.info"))],initialData:{[e]:""}}))),repair:(e,t,a,o)=>{r(o,(()=>Rr(e,t,a,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",Me)))},shouldDisableRepair:b.none(),onChange:b.none()}),T2:b.some({ui:b.some(((e,t)=>({items:[dr(e,Me("a11y.t2.repair.info"))],initialData:{[e]:""}}))),repair:(e,t,a,o)=>{r(o,(()=>((e,t,r,a,o,n)=>{const i=ye(e,"caption").filter(F).map($r).getOr("");return Sr(e,r[t],i,"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate",n).map((a=>(Ge(e,"summary",r[t]),a)))})(e,t,a,0,0,Me)))},shouldDisableRepair:b.none(),onChange:b.none()}),T3:b.some({ui:b.some(((e,t)=>{const r=me(t,"caption").fold(d(""),Ar);return{items:[dr(e,Me("a11y.t1.repair.info"))],initialData:{[e]:r}}})),repair:(e,t,a,o)=>{r(o,(()=>Rr(e,t,a,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",Me)))},shouldDisableRepair:b.none(),onChange:b.none()}),T4A:b.none(),T4B:b.some({ui:b.some(((e,t)=>({items:[ur(e,Me("a11y.t4b.repair.info"),[{text:"a11y.t4c.repair.header.row",value:"row"},{text:"a11y.t4c.repair.header.col",value:"col"}],Me)],initialData:{[e]:""}}))),repair:(e,t,a,o)=>{r(o,(()=>((e,t,r)=>{let a=[];if("row"===r[t]){const t=W(e.dom.rows[0]);a=ce(t,"td")}else"col"===r[t]&&_(e.dom.rows,(e=>{me(W(e),"td").each((e=>{a.push(e)}))}));return _(a,(e=>{const t=M("th");_(e.dom.attributes,(r=>{Be(e,r.name).each((e=>Ge(t,r.name,e)))})),t.dom.innerHTML=e.dom.innerHTML,br(e,t),kr(e)})),Ir.value(e)})(e,t,a)))},shouldDisableRepair:b.some(((e,t)=>!lt(t.element,"td"))),onChange:b.none()}),T4C:b.some({ui:b.some(((e,t)=>({items:[ur(e,Me("a11y.t4c.repair.info"),[{text:"a11y.t4c.repair.scope.row",value:"row"},{text:"a11y.t4c.repair.scope.col",value:"col"},{text:"a11y.t4c.repair.scope.rowgroup",value:"rowgroup"},{text:"a11y.t4c.repair.scope.colgroup",value:"colgroup"}],Me)],initialData:{[e]:""}}))),repair:(e,t,a,o)=>{r(o,(()=>((e,t,r)=>(Ge(e,"scope",r[t]),Ir.value(e)))(e,t,a)))},shouldDisableRepair:b.none(),onChange:b.none()}),D1:b.some({ui:b.some(((e,t)=>({items:[ur(e,Me("a11y.d1.repair.info"),[{text:"a11y.d1.repair.block.h1",value:"h1"},{text:"a11y.d1.repair.block.h2",value:"h2"},{text:"a11y.d1.repair.block.h3",value:"h3"},{text:"a11y.d1.repair.block.h4",value:"h4"},{text:"a11y.d1.repair.block.h5",value:"h5"},{text:"a11y.d1.repair.block.h6",value:"h6"}],Me)],initialData:{[e]:""}}))),repair:(e,t,a,o)=>{r(o,(()=>((e,t,r)=>{const a=Y(e),o=M(r[t],a.dom),n=ee(e),i=T(n,Cr);fr(o,i);const s=ue(o,"b,strong");return _(s,xr),vr(e,o),kr(e),Ir.value(o)})(e,t,a)))},shouldDisableRepair:b.none(),onChange:b.none()}),D2:b.none(),D3:b.some({ui:b.none(),repair:(e,t,a,o)=>{r(o,(()=>(e=>{const t=O(Z(e));return S(t,X("a")).fold((()=>Ir.error({errorMessage:"Failed to find previous link",repairErrorData:{}})),(r=>{for(const e of t){if(L(e,r))break;z(e)&&kr(e)}const a=ee(e);return fr(r,a),kr(e),Ir.value(r)}))})(e)))},shouldDisableRepair:b.none(),onChange:b.none()})};return e=>a.hasOwnProperty(e)?a[e]:b.none()},jr=()=>ue(le(W(document)),".tox-dialog");tinymce.PluginManager.requireLangPack("a11ychecker","ar,bg_BG,ca,cs,da,de,el,es,eu,fa,fi,fr_FR,he_IL,hi,hr,hu_HU,id,it,ja,kk,ko_KR,ms,nb_NO,nl,pl,pt_PT,pt_BR,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,vi,zh_TW,zh_CN"),tinymce.PluginManager.add("a11ychecker",((e,t)=>{if(((e,t)=>!!e&&-1===((e,t)=>{const r=be(e.major,t.major);if(0!==r)return r;const a=be(e.minor,t.minor);if(0!==a)return a;const o=be(e.patch,t.patch);return 0!==o?o:0})((e=>fe((e=>[e.majorVersion,e.minorVersion].join(".").split(".").slice(0,3).join("."))(e)))(e),fe(t)))(tinymce,"6.8.0"))return console.error('The "a11ychecker" plugin requires at least version 6.8.0 of TinyMCE.'),{};((e,t)=>{const a=e.options.register;a("a11ychecker_css_url",{processor:"string",default:t+"/css/annotations.css"}),a("a11ychecker_allow_decorative_images",{processor:"boolean"});const o=[Ae(),Te(),_e()];a("a11ychecker_level",{processor:e=>r(e)&&x(o,e),default:Te()});const n=[ke(),xe()];a("a11ychecker_html_version",{processor:e=>r(e)&&x(n,e),default:xe()}),a("a11ychecker_issue_url_callback",{processor:"function",default:e=>`https://www.tiny.cloud/docs/tinymce/${tinymce.majorVersion}/a11ychecker/#${e}`}),a("a11ychecker_ignored_rules",{processor:"string",default:""}),a("a11ychecker_filter_issue",{processor:"function",default:v})})(e,t);const a=nr(e),o=Ce(e),n=((e,t)=>{const r=$(),a=$(),o=()=>{(e=>{e.dispatch("A11ycheckStop")})(e),a.get().each((e=>e.unbind())),a.clear(),r.clear(),t.clear()},n=()=>{const n=((e,t,r,a,o)=>t.scan().fold((()=>e(hr(a,o))),(n=>e(gr(n,t,r,b.none(),a,o)))))((t=>{const r=jr(),o=e.windowManager.open(t,{inline:"toolbar"});var n,i;return(n=r,i=jr(),S(i,(e=>!A(n,(t=>L(t,e)))))).each((t=>{(t=>{a.set(ie(t,"click",(t=>{ge(t.target,"a.tox-button--more-info-a11ychecker-link").each((t=>{(e=>{e.dispatch("A11ycheckShowDetails")})(e)}))})))})(t)})),o}),t,Gr(e),e,o);r.set(n)},i=e=>e.close();return e.ui.registry.addButton("a11ycheck",{tooltip:Me("a11y.control.tooltip"),icon:"accessibility-check",onAction:n}),e.ui.registry.addMenuItem("a11ycheck",{icon:"accessibility-check",text:Me("a11y.control.menutext"),onAction:n}),()=>r.get().fold(n,i)})(e,a);return e.on("init",(()=>{const t="a11ychecker/css/annotations.css";if(tinymce.Resource.has(t)){const r=tinymce.Resource.get(t);e.dom.styleSheetLoader.loadRawCss(t,r)}else e.dom.loadCSS(o)})),{getReport:a.getReport,toggleaudit:n}}))}();