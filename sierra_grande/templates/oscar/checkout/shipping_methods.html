{% extends "oscar/checkout/checkout.html" %}

{% load currency_filters %}
{% load i18n %}
{% load shipping_tags %}

{% block title %}
  {% translate "Shipping method" %} | {{ block.super }}
{% endblock title %}
{% block checkout_nav %}
  {% include 'oscar/checkout/nav.html' with step=2 %}
{% endblock checkout_nav %}
{% block checkout_title %}
  {% translate "Shipping method" %}
{% endblock checkout_title %}
{% block order_contents %}
{% endblock order_contents %}
{% block shipping_address %}
{% endblock shipping_address %}
{% block payment_method %}
{% endblock payment_method %}
{% block shipping_method %}
  <div class="basket-title">
    <div class="row">
      <h4 class="col-sm-8 m-0">{% translate "Method" %}</h4>
      <h4 class="col-sm-3 m-0">{% translate "Cost" %}</h4>
    </div>
  </div>
  {% for method in methods %}
    <div class="basket-items">
      <div class="row">
        <div class="col-sm-8">
          <h4>{{ method.name }}</h4>
          {% if method.description %}<p>{{ method.description|safe }}</p>{% endif %}
          {% if method.is_discounted %}
            <small>
              {% shipping_charge_discount method basket as discount %}
              {% blocktranslate with amount=discount|currency:basket.currency name=method.discount_name %}
                                This includes a discount of <strong>{{ amount }}</strong> as
                                your basket qualifies for the <strong>{{ name }}</strong> offer.
                            {% endblocktranslate %}
            </small>
          {% endif %}
        </div>
        <div class="col-sm-1">
          {% shipping_charge method basket as charge %}
          {% if charge.is_tax_known %}
            {{ charge.incl_tax|currency:basket.currency }}
          {% else %}
            {{ charge.excl_tax|currency:basket.currency }}
          {% endif %}
        </div>
        <div class="col-sm-3">
          <form method="post" action="{% url 'checkout:shipping-method' %}">
            {% csrf_token %}
            <input type="hidden" name="method_code" value="{{ method.code }}" />
            <button type="submit"
                    class="btn btn-lg btn-primary float-end"
                    data-loading-text="{% translate 'Submitting...' %}">{% translate "Select option" %}</button>
          </form>
        </div>
      </div>
    </div>
  {% endfor %}
{% endblock shipping_method %}
