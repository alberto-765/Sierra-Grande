{% extends "oscar/dashboard/layout.html" %}

{% load dashboard_tags %}
{% load i18n %}
{% load render_table from django_tables2 %}

{% block body_class %}
  {{ block.super }} users
{% endblock body_class %}
{% block title %}
  {% trans "Customers" %} | {{ block.super }}
{% endblock title %}
{% block header %}
  <div>
    <h2>{% trans "Customers" %}</h2>
  </div>
{% endblock header %}
{% block breadcrumbs %}
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a href="{% url "dashboard:index" %}">{% trans "Dashboard" %}</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">{% trans "Customers" %}</li>
    </ol>
  </nav>
{% endblock breadcrumbs %}
{% block dashboard_content %}
  <div class="vstack gap-4">
    <div class="card">
      <h5 class="card-header icon-link">
        <iconify-icon icon="stash:search-light" width="1rem" height="1rem" aria-hidden="true"></iconify-icon>
        {% trans "Search" %}
      </h5>
      <div class="card-body">
        <form method="get" class="hstack">
          {% include "oscar/dashboard/partials/form_fields_inline.html" with form=form %}
          <button type="submit"
                  name="search"
                  class="btn btn-primary me-2"
                  data-loading-text="{% trans "Searching..." %}">{% trans "Search" %}</button>
          <a href="{% url "dashboard:users-index" %}" class="btn btn-secondary">{% trans "Reset" %}</a>
        </form>
      </div>
    </div>
    {% block users_list %}
      {% if users.data %}
        <form id="user_list_form" method="post">
          <div class="card">
            {% csrf_token %}
            {% render_table users %}
          </div>
        </form>
      {% else %}
        <div class="card">
          <div class="card-body p-0">
            <table class="table table-striped table-bordered table-hover">
              <caption>{{ queryset_description }}</caption>
              <tr>
                <td>{% trans "No customers found." %}</td>
              </tr>
            </table>
          </div>
        </div>
      {% endif %}
    {% endblock users_list %}
  </div>
{% endblock dashboard_content %}
