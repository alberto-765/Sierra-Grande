{% load crispy_forms_field %}

{# djlint:off #}

{% if field.is_hidden %}
  {{ field }}
{% else %}
  <div class="floating_field_date_picker {{ wrapper_class|default:"mb-3" }}">
    <div class="input-group has-validation" data-td-target-input="nearest" data-td-target-toggle="nearest" {% for name, value in div_attrs.items %}{{ name }}="{{ value|stringformat:'s' }}"{% endfor %}  id="wrapper_for_{{ widget.attrs.id }}">

      <{% if tag %}{{ tag }} {% else %}div{% endif %} id="div_{{ field.auto_id }}" class="form-floating {% if field.css_classes %}{{ field.css_classes }} {% endif %}">
      {% if field|is_select %}
        {% if field.errors %}
          {% crispy_field field 'class' 'form-select is-invalid' 'placeholder' field.name %}
        {% else %}
          {% crispy_field field 'class' 'form-select' 'placeholder' field.name %}
        {% endif %}
      {% else %}
        {% if field.errors %}
          {% crispy_field field 'class' 'form-control is-invalid' 'placeholder' field.name %}
        {% else %}
          {% crispy_field field 'class' 'form-control' 'placeholder' field.name %}
        {% endif %}
      {% endif %}
      <label {% if field.id_for_label %}for="{{ field.id_for_label }}"{% endif %}
            {% if label_class %}class="{{ label_class }}"{% endif %}>
        {{ field.label }}
        {% if field.field.required %}<span class="asteriskField">*</span>{% endif %}
      </label>

      </{% if tag %}{{ tag }}{% else %}div{% endif %}>

      <span class="input-group-text" data-toggle="datetimepicker" data-target="#wrapper_for_{{ widget.attrs.id }}">
        <iconify-icon icon="{% if "fa-clock" in icon_classes %}mdi:clock-outline{% else %}clarity:calendar-line{% endif %}" width="1rem" height="1rem"></iconify-icon>
      </span>
    </div>

    {% include 'bootstrap5/layout/help_text_and_errors.html' %}
  </div>
{% endif %}

{# djlint:on #}
